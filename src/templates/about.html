{% extends "base.html" %}

{% block title %}About Me - YoohNing{% endblock %}

{% block content %}
<div class="gradient-bg rounded-lg p-8 flex flex-col md:flex-row items-center gap-8">
    <img src="/static/images/avatar.jpg" alt="Avatar" class="w-40 h-40 rounded-full shadow-lg border-4 border-sunset animate-avatar-pop">
    <div>
        <h1 class="text-4xl font-bold mb-4">Hi, I'm YooooohNing</h1>
        <p class="text-lg leading-relaxed mb-4">Full Stack Developer | Photographer | Music Producer<br>
        <br>
        Gaming Enthusiast Ã— Anime Lover Ã— Web3 Knowledge Miner Ã— Nature Enthusiast </p>
        <div class="flex space-x-4 mt-4">
            <a href="liam_zhang77@foxmail.com" class="text-sky hover:underline flex items-center">
                <span class="mr-1">âœ‰ï¸</span>Email
            </a>
            <a href="https://github.com/LiamZzTeo" target="_blank" class="text-sunset hover:underline flex items-center">
                <span class="mr-1">ğŸ™</span>GitHub
            </a>
            <a href="https://www.instagram.com/yoohning/" target="_blank" class="text-pink-500 hover:underline flex items-center">
                <span class="mr-1">ğŸ“¸</span>Instagram
            </a>
            <a href="https://space.bilibili.com/386148044?spm_id_from=333.1387.0.0" target="_blank" class="text-blue-400 hover:underline flex items-center">
                <span class="mr-1">ğŸ“º</span>Bilibili
            </a>
        </div>
    </div>
</div>
<<<<<<< HEAD

<!-- RAGèŠå¤©ç»„ä»¶ -->
<!-- RAGèŠå¤©ç»„ä»¶ -->
<div class="mt-8 gradient-bg rounded-lg p-6">
    <h2 class="text-2xl font-bold mb-4">å’Œæˆ‘èŠå¤©</h2>
    <!-- ä¿®æ”¹chat-containerçš„æ ·å¼ï¼Œæ·»åŠ flexå¸ƒå±€ -->
    <div id="chat-container" class="bg-white/10 rounded-lg p-4 h-[400px] flex flex-col mb-4">
        <!-- æ·»åŠ ä¸€ä¸ªåŒ…è£…divæ¥å¤„ç†æ»šåŠ¨ -->
        <div id="chat-messages" class="space-y-4 overflow-y-auto flex-1 pr-2">
            <!-- æ¶ˆæ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
        </div>
    </div>
    <div class="flex gap-2">
        <input type="text" id="chat-input" 
               class="flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-2 focus:outline-none focus:border-sunset"
               placeholder="é—®æˆ‘ä»»ä½•é—®é¢˜...">
        <button id="send-button" 
                class="bg-sunset text-white px-6 py-2 rounded-lg hover:bg-sunset/80 transition-colors">
            å‘é€
        </button>
    </div>
</div>
=======
>>>>>>> 08dbea0c5cefd6c05ded0e13d413e1fbfc5c00ab
{% endblock %}

{% block extra_js %}
<script>
// å¤´åƒå¼¹è·³åŠ¨ç”»
document.querySelector('.animate-avatar-pop').animate([
    { transform: 'scale(0.8)' },
    { transform: 'scale(1.1)' },
    { transform: 'scale(1)' }
], {
    duration: 800,
    easing: 'ease-out'
});
<<<<<<< HEAD

document.addEventListener('DOMContentLoaded', function() {
    const chatContainer = document.getElementById('chat-container');
    const chatMessages = document.getElementById('chat-messages');
    const chatInput = document.getElementById('chat-input');
    const sendButton = document.getElementById('send-button');

    // é…ç½®markedé€‰é¡¹
    marked.setOptions({
        breaks: true,  // æ”¯æŒæ¢è¡Œ
        gfm: true,     // æ”¯æŒGitHubé£æ ¼çš„Markdown
        headerIds: false,  // ç¦ç”¨æ ‡é¢˜ID
        mangle: false,     // ç¦ç”¨æ ‡é¢˜IDæ··æ·†
        sanitize: false    // å…è®¸HTMLæ ‡ç­¾
    });

        // å¹³æ»‘æ»šåŠ¨åˆ°åº•éƒ¨
    function scrollToBottom() {
        chatMessages.scrollTo({
            top: chatMessages.scrollHeight,
            behavior: 'smooth'
        });
    }

    // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©çª—å£
    function addMessage(content, isUser = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;
        
        const messageBubble = document.createElement('div');
        messageBubble.className = `max-w-[80%] rounded-lg p-3 ${
            isUser ? 'bg-sunset text-white' : 'bg-white/20 text-white'
        }`;

        if (isUser) {
            // ç”¨æˆ·æ¶ˆæ¯ç›´æ¥æ˜¾ç¤ºæ–‡æœ¬
            messageBubble.textContent = content;
        } else {
            // AIæ¶ˆæ¯ä½¿ç”¨Markdownæ¸²æŸ“
            messageBubble.className += ' markdown-content';
            messageBubble.innerHTML = marked.parse(content);
        }
        
        messageDiv.appendChild(messageBubble);
        chatMessages.appendChild(messageDiv);
        // ä½¿ç”¨ requestAnimationFrame ç¡®ä¿åœ¨DOMæ›´æ–°åæ»šåŠ¨
        requestAnimationFrame(() => {
            scrollToBottom();
        });
    }

    // ç›‘å¬è¾“å…¥æ¡†çš„è¾“å…¥äº‹ä»¶ï¼Œè‡ªåŠ¨è°ƒæ•´é«˜åº¦
    chatInput.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = (this.scrollHeight) + 'px';
    });

    // å‘é€æ¶ˆæ¯
    async function sendMessage() {
        const message = chatInput.value.trim();
        if (!message) return;

        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        addMessage(message, true);
        chatInput.value = '';

        // æ·»åŠ åŠ è½½çŠ¶æ€
        const loadingDiv = document.createElement('div');
        loadingDiv.className = 'flex justify-start';
        loadingDiv.innerHTML = '<div class="bg-white/20 text-white rounded-lg p-3 message-typing">æ€è€ƒä¸­...</div>';
        chatMessages.appendChild(loadingDiv);

        try {
            // å‘é€åˆ°åç«¯
            const response = await fetch('/api/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json; charset=utf-8',
                    'Accept': 'application/json; charset=utf-8'
                },
                body: JSON.stringify({ query: message })
            });

            // ç§»é™¤åŠ è½½çŠ¶æ€
            chatMessages.removeChild(loadingDiv);

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.response || `HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            
            if (!data.response) {
                throw new Error('æœåŠ¡å™¨è¿”å›ç©ºå“åº”');
            }

            // æ·»åŠ AIå“åº”
            addMessage(data.response);
        } catch (error) {
            console.error('Error:', error);
            // ç§»é™¤åŠ è½½çŠ¶æ€ï¼ˆå¦‚æœè¿˜å­˜åœ¨ï¼‰
            if (loadingDiv.parentNode === chatMessages) {
                chatMessages.removeChild(loadingDiv);
            }
            // æ˜¾ç¤ºå…·ä½“çš„é”™è¯¯ä¿¡æ¯
            addMessage(`æŠ±æ­‰ï¼Œå‘ç”Ÿé”™è¯¯ï¼š${error.message}`);
        }
    }

    // äº‹ä»¶ç›‘å¬
    sendButton.addEventListener('click', sendMessage);
    chatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    const style = document.createElement('style');
    style.textContent = `
        #chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        #chat-messages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        #chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }
        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        .message-typing {
            display: inline-block;
            animation: typing 1s infinite;
        }
        @keyframes typing {
            0% { opacity: 0.3; }
            50% { opacity: 1; }
            100% { opacity: 0.3; }
        }
    `;
    document.head.appendChild(style);

    // æ·»åŠ æ¬¢è¿æ¶ˆæ¯
    addMessage('ä½ å¥½ï¼æˆ‘æ˜¯YoohNingçš„AIåŠ©æ‰‹ã€‚ä½ å¯ä»¥é—®æˆ‘ä»»ä½•å…³äºYoohNingçš„é—®é¢˜ï¼Œæ¯”å¦‚ä»–çš„æŠ€èƒ½ã€ç»å†ã€å…´è¶£çˆ±å¥½ç­‰ã€‚');
});
=======
>>>>>>> 08dbea0c5cefd6c05ded0e13d413e1fbfc5c00ab
</script>
{% endblock %}